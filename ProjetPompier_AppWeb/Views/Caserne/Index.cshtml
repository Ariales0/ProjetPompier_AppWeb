@using ProjetPompier_API.Logics.Models;
@model CaserneDTO;
@*Si erreur du côté serveur... affichage du message d'erreur...*@
@if (ViewBag.MessageErreur != null)
{
    <br />
    <h2 class="alert-danger">@ViewBag.MessageErreur</h2>
}
else
{
    <h3>Liste des caserne(s) (@ViewBag.NbCaserne Caserne(s) ):</h3>
    @*Formulaire de la modification de la caserne*@
    <form asp-controller="" asp-action="" method="post">
        <table>
            <tr>
                <th>Nom</th>
                <th>Adresse</th>
                <th>Ville</th>
                <th>Province</th>
                <th>Téléphone</th>
                <th><input value="Vider" onclick="this.form.action='/Caserne/ViderListeCaserne'; this.form.method='post'; submit();" type="button" /></th>
            </tr>

            @*Parcours la liste des casernes*@
            @foreach (CaserneDTO caserne in ViewBag.ListeCaserne)
            {
                <tr>
                    <td>@caserne.Nom</td>
                    <td>@caserne.Adresse</td>
                    <td>@caserne.Ville</td>
                    <td>@caserne.Province</td>
                    <td>@caserne.Telephone</td>
                    @*Appel la méthode FormulaireModifierCaserne du controleur CaserneController*@
                    <td><input value="Modifier" onclick="document.getElementById('nomCaserne').value ='@caserne.Nom'; this.form.action='/Caserne/FormulaireModifierCaserne'; this.form.method='get'; submit();" type="button" /></td>
                    <td><input value="Supprimer" onclick="document.getElementById('nomCaserne').value ='@caserne.Nom'; this.form.action='/Caserne/SupprimerCaserne'; this.form.method='post'; submit();" type="button" /></td>
                </tr>
            }

        </table>
        <input id="nomCaserne" name="nomCaserne" type="hidden" />
    </form>
    <br />
    <br />
    <b>Ajouter une caserne</b>
    <br />
    @*Formulaire de l'ajout d'une caserne*@
    <form asp-controller="Caserne" asp-action="AjouterCaserne" method="post">
        <table>
            <tr>
                <td>
                    <label asp-for="Nom"></label>
                </td>
                <td>
                    <input asp-for="Nom" required />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="Adresse"></label>
                </td>
                <td>
                    <input asp-for="Adresse" required />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="Ville"></label>
                </td>
                <td>
                    <input asp-for="Ville" required />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="Province"></label>
                </td>
                <td>
                    <input asp-for="Province" required />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="Telephone"></label>
                </td>
                <td>
                    <input asp-for="Telephone" required />
                </td>
            </tr>
        </table>
        <input type="submit" value="Ajouter" />
    </form>
    <br />
}